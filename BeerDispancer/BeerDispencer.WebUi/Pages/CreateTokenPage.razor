@page "/CreateNewToken"
@inject IJSRuntime jsRuntime;

<link href="css/payments.css" rel="stylesheet" />
<RadzenCard>
    <RadzenText Style="margin-bottom:50px" TextStyle="TextStyle.H3" TagName="TagName.H3" TextAlign="TextAlign.Center">Credit or Debit Card</RadzenText>

   
    @*<body class="paymentbody">*@
        <RadzenRow Gap="1rem" JustifyContent="JustifyContent.Center">
            <RadzenColumn Size="12" SizeSM="6">
                <RadzenStack>
                    <form action="/api/payments/addcard" method="POST" class="paymentform">
                        <input type="hidden" name="token" />
                        <div class="group">
                            <label class="paymentlabel">
                                <span>Card number</span>
                                <div id="card-number-element" class="field"></div>
                            </label>
                            <label class="paymentlabel">
                                <span>Expiry date</span>
                                <div id="card-expiry-element" class="field"></div>
                            </label>
                            <label class="paymentlabel">
                                <span>CVC</span>
                                <div id="card-cvc-element" class="field"></div>
                            </label>
                            <label class="paymentlabel">
                                <span>Account Holder</span>
                                <input type="text" autocomplete="on"  id="accountholder-element" class="field" />
                            </label>
                            <label class="paymentlabel">
                                <span>Email</span>
                                <input type="text" autocomplete="on" autocompletetype="email" id="email-element" class="field" />
                            </label>
                        </div>
                        <button class="paymentbutton" type="submit">Add Card</button>
                        <div class="outcome">
                            <div class="error"></div>
                            <div class="success">
                                Success! Your Stripe token is <span class="token"></span>
                            </div>
                        </div>
                    </form>
                    </RadzenStack>
                </RadzenColumn>
            </RadzenRow>
    @*</body>*@
</RadzenCard>
        @code {

            protected override async void OnAfterRender(bool firstRender)
            {
                var pkey = "pk_test_51NpWMxBwrd9g8wB1Kl1fBZ4P25KtfUwBobeHU8WPORfQBQtdXb446cMP3R7DpSxiNgRSGMPUfu7hdGQpNokBOiRx00VhUbVBJa";
                var secretKey = "sk_test_51NpWMxBwrd9g8wB1ZYC53bWwtbj73k93Jmil5TtvOK4kvmsBBfPHm172yAF2HhcKfXBLjCoZGrCKjfdUgv340PFH00Kh4wo9IZ";
                await jsRuntime.InvokeVoidAsync("onPaymentPageInit", pkey);
            }
        }

