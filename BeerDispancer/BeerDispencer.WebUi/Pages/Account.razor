@page "/account"
@using Radzen.Blazor;
@inject BeerDispenser.WebUi.Implementation.TimeZoneService TimeZoneService

<PageTitle>Account</PageTitle>


<RadzenCard>

    @if (!string.IsNullOrEmpty(mainLayout.GetUserName()))
        {

        <RadzenText Style="margin-bottom:50px" TextStyle="TextStyle.H3" TagName="TagName.H3" TextAlign="TextAlign.Center">Account Information</RadzenText>


        <RadzenRow Gap="1rem" JustifyContent="JustifyContent.Left" >
            <RadzenColumn Size="12" SizeSM="6" Sty>
                <RadzenStack>
                    <RadzenLabel>Username</RadzenLabel>
                    <RadzenText>@mainLayout.GetUserName()</RadzenText>
                </RadzenStack>

                <RadzenStack>
                    <RadzenLabel>Token</RadzenLabel>
                    <RadzenText>@mainLayout.Token</RadzenText>
                </RadzenStack>

                <RadzenStack>
                    <RadzenLabel>Role</RadzenLabel>
                    <RadzenText>@mainLayout.Role</RadzenText> 
                </RadzenStack>

                <RadzenStack>
                    <RadzenLabel>ValidUntil</RadzenLabel>
                    <RadzenText>@mainLayout.ValidUntil</RadzenText>
                </RadzenStack>

                <RadzenStack>
                    <RadzenLabel>LocalTime</RadzenLabel>
                    <RadzenText>@now.ToString()</RadzenText>
                </RadzenStack>
                    </RadzenColumn>
                </RadzenRow>



        }
        else
        {
        <RadzenText>Please Login</RadzenText>
        <RadzenButton Text="Login" Click="@(args => mainLayout.OpenLogin())" />
        }
</RadzenCard>


@code {
    [CascadingParameter]
    public MainLayout mainLayout { get; set; }
    public DateTimeOffset? now;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        now = await TimeZoneService.GetLocalDateTime(DateTime.UtcNow);
    }

}
