@page "/external-login"
@page "/external-login/{jwt}"
@inject AccountService accountService;
@inject UserNotificationService NotificationService;
@inject NavigationManager NavManager

@using BeerDispenser.WebUi.Implementation;
@using System.Net;

@code {

    [Parameter]
    public string jwt { get; set; }

    protected override async void OnAfterRender(bool firstRender)
    {
        if (jwt is null)
        {
            NavManager.NavigateTo("/login");
            NotificationService.ShowErrorNotification("Login error");
        }
        else
        {
            accountService.OnExternalLogin(jwt);
            NavManager.NavigateTo("/bar");
        }
    }

}
